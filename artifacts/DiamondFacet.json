{
  "contractName": "DiamondFacet",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "bytes[]",
          "name": "_diamondCut",
          "type": "bytes[]"
        }
      ],
      "name": "DiamondCut",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "bytes[]",
          "name": "_diamondCut",
          "type": "bytes[]"
        }
      ],
      "name": "diamondCut",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b50610943806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c806399f5f52e14610030575b600080fd5b61004361003e366004610694565b610045565b005b600061004f6105d2565b805490915073ffffffffffffffffffffffffffffffffffffffff1633146100915760405162461bcd60e51b8152600401610088906107e4565b60405180910390fd5b6100996105f6565b60038201548082526fffffffffffffffffffffffffffffffff81169060801c80156100d7576000828152600285016020908152604090912054908401525b60005b85518110156105575760608682815181106100f157fe5b60200260200101519050601481511161011c5760405162461bcd60e51b815260040161008890610878565b602081015181516bffffffffffffffffffffffff1982169060047fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec90910104603482156103245760005b8281101561031e57858201516001600160e01b03198116600090815260018d016020526040902054600490930192806102b3578a60001b60408b60001b901b8717178d6001016000847bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191681526020019081526020016000208190555089602002827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916901c8a6020026001600160e01b031960001b901c198d6020015116178c602001818152505089806001019a505089600814156102a6578b602001518d60020160008d8152602001908152602001600020819055506000801b8c6020018181525050600099508a806001019b505060008c60a00190151590811515815250506102ae565b600160a08d01525b610314565b6bffffffffffffffffffffffff1981811690871614156102e55760405162461bcd60e51b8152600401610088906108af565b6001600160e01b03198216600090815260018e01602052604090206bffffffffffffffffffffffff8216871790555b5050600101610166565b50610546565b60005b8281101561054457858201516001600160e01b03198116600090815260018d016020526040902054600490930192806103725760405162461bcd60e51b81526004016100889061081b565b60208c015161039f57600019909a01600081815260028e016020908152604090912054908d015299600899505b67ffffffffffffffff811660408d810182905282901c63ffffffff1660608e01526020808e01516000198d019091021b908c1461047a578d60020160008e604001518152602001908152602001600020548d60800181815250508c60600151602002817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916901c8d606001516020026001600160e01b031960001b901c198e6080015116178d60800181815250508c608001518e60020160008f604001518152602001908152602001600020819055508a80600190039b50506104ac565b60608d01516020808f0180516001600160e01b03199290930282811c199390931691841690921c179052600019909a01995b8a6104ca5760008c815260028f016020908152604082208290558e01525b6001600160e01b03198181169084161461051d576001600160e01b03198116600090815260018f016020526040902080546bffffffffffffffffffffffff19166bffffffffffffffffffffffff84161790555b50506001600160e01b03191660009081526001808d01602052604082209190915501610327565b505b5050600190930192506100da915050565b508251608082901b831790811461057057600385018190555b8360a0015115610593576020808501516000858152600288019092526040909120555b7f6ace155508eb66f4d8afce32f392ee3b0a8ab3c0133964f1f3c613e497da45fe866040516105c2919061072f565b60405180910390a1505050505050565b7fc8fcad8db84d3cc18b4c41d551ea0ee66dd599cde068d998e57d5e09332c131c90565b6040805160c081018252600080825260208201819052918101829052606081018290526080810182905260a081019190915290565b600082601f83011261063b578081fd5b813567ffffffffffffffff811115610651578182fd5b6106646020601f19601f840116016108e6565b915080825283602082850101111561067b57600080fd5b8060208401602084013760009082016020015292915050565b600060208083850312156106a6578182fd5b823567ffffffffffffffff808211156106bd578384fd5b81850186601f8201126106ce578485fd5b80359250818311156106de578485fd5b6106eb84858502016108e6565b8381528481019250818501865b858110156107215761070f8a88843587010161062b565b855293860193908601906001016106f8565b509098975050505050505050565b6000602080830181845280855180835260408601915060408482028701019250838701855b828110156107d7577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc088860301845281518051808752885b818110156107a7578281018901518882018a0152880161078c565b818111156107b7578989838a0101525b50601f01601f191695909501860194509285019290850190600101610754565b5092979650505050505050565b60208082526016908201527f4d757374206f776e2074686520636f6e74726163742e00000000000000000000604082015260600190565b60208082526025908201527f46756e6374696f6e20646f65736e27742065786973742e2043616e277420726560408201527f6d6f76652e000000000000000000000000000000000000000000000000000000606082015260800190565b6020808252601f908201527f4d697373696e67206661636574206f722073656c6563746f7220696e666f2e00604082015260600190565b6020808252601b908201527f46756e6374696f6e2063757420746f2073616d652066616365742e0000000000604082015260600190565b60405181810167ffffffffffffffff8111828210171561090557600080fd5b60405291905056fea2646970667358221220e44adf2b686d84cbdc8e496c4e13897edc80ccc13f692deb734a10f9df5b538664736f6c63430006050033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b506004361061002b5760003560e01c806399f5f52e14610030575b600080fd5b61004361003e366004610694565b610045565b005b600061004f6105d2565b805490915073ffffffffffffffffffffffffffffffffffffffff1633146100915760405162461bcd60e51b8152600401610088906107e4565b60405180910390fd5b6100996105f6565b60038201548082526fffffffffffffffffffffffffffffffff81169060801c80156100d7576000828152600285016020908152604090912054908401525b60005b85518110156105575760608682815181106100f157fe5b60200260200101519050601481511161011c5760405162461bcd60e51b815260040161008890610878565b602081015181516bffffffffffffffffffffffff1982169060047fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec90910104603482156103245760005b8281101561031e57858201516001600160e01b03198116600090815260018d016020526040902054600490930192806102b3578a60001b60408b60001b901b8717178d6001016000847bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191681526020019081526020016000208190555089602002827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916901c8a6020026001600160e01b031960001b901c198d6020015116178c602001818152505089806001019a505089600814156102a6578b602001518d60020160008d8152602001908152602001600020819055506000801b8c6020018181525050600099508a806001019b505060008c60a00190151590811515815250506102ae565b600160a08d01525b610314565b6bffffffffffffffffffffffff1981811690871614156102e55760405162461bcd60e51b8152600401610088906108af565b6001600160e01b03198216600090815260018e01602052604090206bffffffffffffffffffffffff8216871790555b5050600101610166565b50610546565b60005b8281101561054457858201516001600160e01b03198116600090815260018d016020526040902054600490930192806103725760405162461bcd60e51b81526004016100889061081b565b60208c015161039f57600019909a01600081815260028e016020908152604090912054908d015299600899505b67ffffffffffffffff811660408d810182905282901c63ffffffff1660608e01526020808e01516000198d019091021b908c1461047a578d60020160008e604001518152602001908152602001600020548d60800181815250508c60600151602002817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916901c8d606001516020026001600160e01b031960001b901c198e6080015116178d60800181815250508c608001518e60020160008f604001518152602001908152602001600020819055508a80600190039b50506104ac565b60608d01516020808f0180516001600160e01b03199290930282811c199390931691841690921c179052600019909a01995b8a6104ca5760008c815260028f016020908152604082208290558e01525b6001600160e01b03198181169084161461051d576001600160e01b03198116600090815260018f016020526040902080546bffffffffffffffffffffffff19166bffffffffffffffffffffffff84161790555b50506001600160e01b03191660009081526001808d01602052604082209190915501610327565b505b5050600190930192506100da915050565b508251608082901b831790811461057057600385018190555b8360a0015115610593576020808501516000858152600288019092526040909120555b7f6ace155508eb66f4d8afce32f392ee3b0a8ab3c0133964f1f3c613e497da45fe866040516105c2919061072f565b60405180910390a1505050505050565b7fc8fcad8db84d3cc18b4c41d551ea0ee66dd599cde068d998e57d5e09332c131c90565b6040805160c081018252600080825260208201819052918101829052606081018290526080810182905260a081019190915290565b600082601f83011261063b578081fd5b813567ffffffffffffffff811115610651578182fd5b6106646020601f19601f840116016108e6565b915080825283602082850101111561067b57600080fd5b8060208401602084013760009082016020015292915050565b600060208083850312156106a6578182fd5b823567ffffffffffffffff808211156106bd578384fd5b81850186601f8201126106ce578485fd5b80359250818311156106de578485fd5b6106eb84858502016108e6565b8381528481019250818501865b858110156107215761070f8a88843587010161062b565b855293860193908601906001016106f8565b509098975050505050505050565b6000602080830181845280855180835260408601915060408482028701019250838701855b828110156107d7577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc088860301845281518051808752885b818110156107a7578281018901518882018a0152880161078c565b818111156107b7578989838a0101525b50601f01601f191695909501860194509285019290850190600101610754565b5092979650505050505050565b60208082526016908201527f4d757374206f776e2074686520636f6e74726163742e00000000000000000000604082015260600190565b60208082526025908201527f46756e6374696f6e20646f65736e27742065786973742e2043616e277420726560408201527f6d6f76652e000000000000000000000000000000000000000000000000000000606082015260800190565b6020808252601f908201527f4d697373696e67206661636574206f722073656c6563746f7220696e666f2e00604082015260600190565b6020808252601b908201527f46756e6374696f6e2063757420746f2073616d652066616365742e0000000000604082015260600190565b60405181810167ffffffffffffffff8111828210171561090557600080fd5b60405291905056fea2646970667358221220e44adf2b686d84cbdc8e496c4e13897edc80ccc13f692deb734a10f9df5b538664736f6c63430006050033",
  "linkReferences": {},
  "deployedLinkReferences": {},
  "metadata": "{\"compiler\":{\"version\":\"0.6.5+commit.f956cc89\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"bytes[]\",\"name\":\"_diamondCut\",\"type\":\"bytes[]\"}],\"name\":\"DiamondCut\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"bytes[]\",\"name\":\"_diamondCut\",\"type\":\"bytes[]\"}],\"name\":\"diamondCut\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"methods\":{}},\"userdoc\":{\"methods\":{}}},\"settings\":{\"compilationTarget\":{\"solc_0.6/proxy/diamond/DiamondFacet.sol\":\"DiamondFacet\"},\"evmVersion\":\"istanbul\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":2000},\"remappings\":[]},\"sources\":{\"solc_0.6/proxy/diamond/DiamondFacet.sol\":{\"content\":\"pragma solidity ^0.6.4;\\npragma experimental ABIEncoderV2;\\n\\n/******************************************************************************\\\\\\n* Author: Nick Mudge\\n* from https://github.com/mudgen/Diamond/blob/8235e6b63b47aab08a81c6f73bfb7faafda79ca4/contracts/\\n*\\n* Implementation of Diamond facet.\\n* This is gas optimized by reducing storage reads and storage writes.\\n/******************************************************************************/\\n\\nimport \\\"./DiamondStorageContract.sol\\\";\\nimport \\\"./DiamondHeaders.sol\\\";\\n\\ncontract DiamondFacet is Diamond, DiamondStorageContract {  \\n    bytes32 constant CLEAR_ADDRESS_MASK = 0x0000000000000000000000000000000000000000ffffffffffffffffffffffff;\\n    bytes32 constant CLEAR_SELECTOR_MASK = 0xffffffff00000000000000000000000000000000000000000000000000000000;\\n\\n    struct SlotInfo {\\n        uint originalSelectorSlotsLength;                \\n        bytes32 selectorSlot;\\n        uint oldSelectorSlotsIndex;\\n        uint oldSelectorSlotIndex;\\n        bytes32 oldSelectorSlot;\\n        bool newSlot;\\n    }\\n\\n    function diamondCut(bytes[] memory _diamondCut) public override {\\n        DiamondStorage storage ds = diamondStorage();      \\n        require(msg.sender == ds.contractOwner, \\\"Must own the contract.\\\");        \\n        SlotInfo memory slot;\\n        slot.originalSelectorSlotsLength = ds.selectorSlotsLength;\\n        uint selectorSlotsLength = uint128(slot.originalSelectorSlotsLength);\\n        uint selectorSlotLength = uint128(slot.originalSelectorSlotsLength >> 128);\\n        if(selectorSlotLength > 0) {\\n            slot.selectorSlot = ds.selectorSlots[selectorSlotsLength];\\n        }\\n        // loop through diamond cut        \\n        for(uint diamondCutIndex; diamondCutIndex < _diamondCut.length; diamondCutIndex++) {\\n            bytes memory facetCut = _diamondCut[diamondCutIndex];\\n            require(facetCut.length > 20, \\\"Missing facet or selector info.\\\");\\n            bytes32 currentSlot;            \\n            assembly { \\n                currentSlot := mload(add(facetCut,32)) \\n            }\\n            bytes32 newFacet = bytes20(currentSlot);            \\n            uint numSelectors = (facetCut.length - 20) / 4;\\n            uint position = 52;\\n            \\n            // adding or replacing functions\\n            if(newFacet != 0) {                \\n                // add and replace selectors\\n                for(uint selectorIndex; selectorIndex < numSelectors; selectorIndex++) {\\n                    bytes4 selector;\\n                    assembly { \\n                        selector := mload(add(facetCut,position)) \\n                    }\\n                    position += 4;                    \\n                    bytes32 oldFacet = ds.facets[selector];                    \\n                    // add\\n                    if(oldFacet == 0) {                            \\n                        ds.facets[selector] = newFacet | bytes32(selectorSlotLength) << 64 | bytes32(selectorSlotsLength);                            \\n                        slot.selectorSlot = slot.selectorSlot & ~(CLEAR_SELECTOR_MASK >> selectorSlotLength * 32) | bytes32(selector) >> selectorSlotLength * 32;                            \\n                        selectorSlotLength++;\\n                        if(selectorSlotLength == 8) {\\n                            ds.selectorSlots[selectorSlotsLength] = slot.selectorSlot;                                \\n                            slot.selectorSlot = 0;\\n                            selectorSlotLength = 0;\\n                            selectorSlotsLength++;\\n                            slot.newSlot = false;\\n                        }\\n                        else {\\n                            slot.newSlot = true;\\n                        }                          \\n                    }                    \\n                    // replace\\n                    else {\\n                        require(bytes20(oldFacet) != bytes20(newFacet), \\\"Function cut to same facet.\\\");\\n                        ds.facets[selector] = oldFacet & CLEAR_ADDRESS_MASK | newFacet;\\n                    }                                        \\n                }\\n            }\\n            // remove functions\\n            else {                \\n                for(uint selectorIndex; selectorIndex < numSelectors; selectorIndex++) {\\n                    bytes4 selector;\\n                    assembly { \\n                        selector := mload(add(facetCut,position)) \\n                    }\\n                    position += 4;                    \\n                    bytes32 oldFacet = ds.facets[selector];\\n                    require(oldFacet != 0, \\\"Function doesn't exist. Can't remove.\\\");\\n                    if(slot.selectorSlot == 0) {\\n                        selectorSlotsLength--;\\n                        slot.selectorSlot = ds.selectorSlots[selectorSlotsLength];\\n                        selectorSlotLength = 8;\\n                    }\\n                    slot.oldSelectorSlotsIndex = uint64(uint(oldFacet));\\n                    slot.oldSelectorSlotIndex = uint32(uint(oldFacet >> 64));                    \\n                    bytes4 lastSelector = bytes4(slot.selectorSlot << (selectorSlotLength-1) * 32);                     \\n                    if(slot.oldSelectorSlotsIndex != selectorSlotsLength) {\\n                        slot.oldSelectorSlot = ds.selectorSlots[slot.oldSelectorSlotsIndex];                            \\n                        slot.oldSelectorSlot = slot.oldSelectorSlot & ~(CLEAR_SELECTOR_MASK >> slot.oldSelectorSlotIndex * 32) | bytes32(lastSelector) >> slot.oldSelectorSlotIndex * 32;                                                \\n                        ds.selectorSlots[slot.oldSelectorSlotsIndex] = slot.oldSelectorSlot;                        \\n                        selectorSlotLength--;                            \\n                    }\\n                    else {\\n                        slot.selectorSlot = slot.selectorSlot & ~(CLEAR_SELECTOR_MASK >> slot.oldSelectorSlotIndex * 32) | bytes32(lastSelector) >> slot.oldSelectorSlotIndex * 32;\\n                        selectorSlotLength--;\\n                    }\\n                    if(selectorSlotLength == 0) {\\n                        delete ds.selectorSlots[selectorSlotsLength];                                                \\n                        slot.selectorSlot = 0;\\n                    }\\n                    if(lastSelector != selector) {                      \\n                        ds.facets[lastSelector] = oldFacet & CLEAR_ADDRESS_MASK | bytes20(ds.facets[lastSelector]); \\n                    }\\n                    delete ds.facets[selector];\\n                }\\n            }\\n        }\\n        uint newSelectorSlotsLength = selectorSlotLength << 128 | selectorSlotsLength;\\n        if(newSelectorSlotsLength != slot.originalSelectorSlotsLength) {\\n            ds.selectorSlotsLength = newSelectorSlotsLength;            \\n        }        \\n        if(slot.newSlot) {\\n            ds.selectorSlots[selectorSlotsLength] = slot.selectorSlot;                        \\n        }\\n        emit DiamondCut(_diamondCut);\\n    }\\n}\\n\",\"keccak256\":\"0x2f5cfeb013ff9c076a8a7de5f5b4c9c79c1c254da85df103624f5b7f4f32f3ef\"},\"solc_0.6/proxy/diamond/DiamondHeaders.sol\":{\"content\":\"pragma solidity ^0.6.4;\\npragma experimental ABIEncoderV2;\\n\\n// * from https://github.com/mudgen/Diamond/blob/8235e6b63b47aab08a81c6f73bfb7faafda79ca4/contracts/\\n\\ninterface Diamond {\\n    /// @notice _diamondCut is an array of bytes arrays.\\n    /// This argument is tightly packed for gas efficiency.\\n    /// That means no padding with zeros.\\n    /// Here is the structure of _diamondCut:\\n    /// _diamondCut = [\\n    ///     abi.encodePacked(facet, sel1, sel2, sel3, ...),\\n    ///     abi.encodePacked(facet, sel1, sel2, sel4, ...),\\n    ///     ...\\n    /// ]\\n    /// facet is the address of a facet\\n    /// sel1, sel2, sel3 etc. are four-byte function selectors.\\n    function diamondCut(bytes[] calldata _diamondCut) external;\\n\\n    event DiamondCut(bytes[] _diamondCut);\\n}\\n\\n// A loupe is a small magnifying glass used to look at diamonds.\\n// These functions look at diamonds\\ninterface DiamondLoupe {\\n    /// These functions are expected to be called frequently\\n    /// by tools. Therefore the return values are tightly\\n    /// packed for efficiency. That means no padding with zeros.\\n\\n    /// @notice Gets all facets and their selectors.\\n    /// @return An array of bytes arrays containing each facet\\n    ///         and each facet's selectors.\\n    /// The return value is tightly packed.\\n    /// Here is the structure of the return value:\\n    /// returnValue = [\\n    ///     abi.encodePacked(facet, sel1, sel2, sel3, ...),\\n    ///     abi.encodePacked(facet, sel1, sel2, sel3, ...),\\n    ///     ...\\n    /// ]\\n    /// facet is the address of a facet.\\n    /// sel1, sel2, sel3 etc. are four-byte function selectors.\\n    function facets() external view returns (bytes[] memory);\\n\\n    /// @notice Gets all the function selectors supported by a specific facet.\\n    /// @param _facet The facet address.\\n    /// @return A byte array of function selectors.\\n    /// The return value is tightly packed. Here is an example:\\n    /// return abi.encodePacked(selector1, selector2, selector3, ...)\\n    function facetFunctionSelectors(address _facet)\\n        external\\n        view\\n        returns (bytes memory);\\n\\n    /// @notice Get all the facet addresses used by a diamond.\\n    /// @return A byte array of tightly packed facet addresses.\\n    /// Example return value:\\n    /// return abi.encodePacked(facet1, facet2, facet3, ...)\\n    function facetAddresses() external view returns (bytes memory);\\n\\n    /// @notice Gets the facet that supports the given selector.\\n    /// @dev If facet is not found return address(0).\\n    /// @param _functionSelector The function selector.\\n    /// @return The facet address.\\n    function facetAddress(bytes4 _functionSelector)\\n        external\\n        view\\n        returns (address);\\n}\\n\\ninterface ERC165 {\\n    /// @notice Query if a contract implements an interface\\n    /// @param interfaceID The interface identifier, as specified in ERC-165\\n    /// @dev Interface identification is specified in ERC-165. This function\\n    ///  uses less than 30,000 gas.\\n    /// @return `true` if the contract implements `interfaceID` and\\n    ///  `interfaceID` is not 0xffffffff, `false` otherwise\\n    function supportsInterface(bytes4 interfaceID) external view returns (bool);\\n}\\n\",\"keccak256\":\"0xeae8e72fde3952f324d773fd93385191a177e26cce37e0eb9fca5e6ac5781ab8\"},\"solc_0.6/proxy/diamond/DiamondStorageContract.sol\":{\"content\":\"pragma solidity ^0.6.4;\\n\\n// * from https://github.com/mudgen/Diamond/blob/8235e6b63b47aab08a81c6f73bfb7faafda79ca4/contracts/\\n\\n// modified to be an abstract\\n\\nabstract contract DiamondStorageContract {\\n    struct DiamondStorage {\\n        // owner of the contract\\n        address contractOwner;\\n        // maps function selectors to the facets that execute the functions.\\n        // and maps the selectors to the slot in the selectorSlots array.\\n        // and maps the selectors to the position in the slot.\\n        // func selector => address facet, uint64 slotsIndex, uint64 slotIndex\\n        mapping(bytes4 => bytes32) facets;\\n        // array of slots of function selectors.\\n        // each slot holds 8 function selectors.\\n        mapping(uint256 => bytes32) selectorSlots;\\n        // uint128 numSelectorsInSlot, uint128 selectorSlotsLength\\n        // selectorSlotsLength is the number of 32-byte slots in selectorSlots.\\n        // selectorSlotLength is the number of selectors in the last slot of\\n        // selectorSlots.\\n        uint256 selectorSlotsLength;\\n        // Used to query if a contract implements an interface.\\n        // Used to implement ERC-165.\\n        mapping(bytes4 => bool) supportedInterfaces;\\n    }\\n\\n    function diamondStorage()\\n        internal\\n        pure\\n        returns (DiamondStorage storage ds)\\n    {\\n        // ds_slot = keccak256(\\\"diamond.standard.diamond.storage\\\");\\n        assembly {\\n            ds_slot := 0xc8fcad8db84d3cc18b4c41d551ea0ee66dd599cde068d998e57d5e09332c131c\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x6ddce9c68aba45af0b56b560e6cb369bf53f5c08a25bd4b55ed522aae1c233ee\"}},\"version\":1}",
  "contractFilepath": "solc_0.6/proxy/diamond/DiamondFacet.sol"
}